// App module Gradle file for a Cordova + GeckoView project

apply plugin: 'com.android.application'

android {
    // Cordova usually defines these in Gradle properties; if your generated file
    // uses cdvCompileSdkVersion etc., you can keep those instead of hardcoding.    

    defaultConfig {     

        // Only ship a single ABI to reduce size (arm64 is what most modern devices use)
        ndk {
            abiFilters "arm64-v8a"
        }

        // Only keep English resources; remove this if you need more locales
        resConfigs "en"
    }

    // Required for GeckoView 143+
    compileOptions {
        sourceCompatibility JavaVersion.VERSION_17
        targetCompatibility JavaVersion.VERSION_17
    }

    // Release vs debug builds
    buildTypes {
        release {
            // Turn on code + resource shrinking for smaller builds
            minifyEnabled false
            shrinkResources false
            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt')
        }
        debug {
            minifyEnabled false
            shrinkResources false
        }
    }

    // Strip debug symbol libraries if present (can be large)
    packagingOptions {
        excludes += ["**/*.so.debug"]
        excludes += ["**/libxul.so.debug"]
    }
}

// Repositories: Cordova + GeckoView
repositories {
    google()
    mavenCentral()
    // Needed for GeckoView dependency
    maven { url "https://maven.mozilla.org/maven2/" }
}

// Dependencies
dependencies {
    implementation fileTree(dir: 'libs', include: ['*.jar'])

    // Cordova core library (this project is generated by cordova-android)
    implementation project(':CordovaLib')

    // GeckoView engine (regular, not omni, to keep size down)
    implementation "org.mozilla.geckoview:geckoview:143.0.20251003115653"
}

// Cordova hooks (this line is normally at the end of app/build.gradle)
apply from: "../CordovaLib/cordova.gradle"
